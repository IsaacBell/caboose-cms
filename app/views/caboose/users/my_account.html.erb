
<h1>My Account</h1>
<div id='first_name' id='first_name' placeholder='First name' />
<div id='last_name'  id='last_name'  placeholder='Last name' />
<div id='email'      id='email'      placeholder='Email address' />
<div id='phone'      id='phone'      placeholder='Phone number' />
<div id='message'></div>
<p><input type='button' id='btn_cancel'   value='Close' onclick="parent.$.fn.colorbox.close();" /></p>

<% content_for :caboose_js do %>
<script type='text/javascript'>

var modal = false;
$(window).load(function() {  
  modal = new CabooseModal(500);
});

$(document).ready(function() {
  new ModelBinder({
    name: 'User',
    id: <%= @user.id %>,
    update_url: '/my-account',
    authenticity_token: '<%= form_authenticity_token %>',
    attributes: [
      { name: 'first_name' , nice_name: 'First name'   , type: 'text', value: <%= raw Caboose.json(@user.first_name) %>, width: 280 },
      { name: 'last_name'  , nice_name: 'Last name'    , type: 'text', value: <%= raw Caboose.json(@user.last_name)  %>, width: 280 },      
      { name: 'email'      , nice_name: 'Email'        , type: 'text', value: <%= raw Caboose.json(@user.email)      %>, width: 280 },
      { name: 'phone'      , nice_name: 'Phone Number' , type: 'text', value: <%= raw Caboose.json(@user.phone)      %>, width: 280 }
    ],
    on_load: function() { modal.autosize(); }
  });  
});

</script>
<% end %>
<%= content_for :caboose_css do %>
<%= stylesheet_link_tag "caboose/my-account", :media => "all" %>
<% end %>


<h1>Edit Page Settings</h1>
<p class='current_page_editing'>Currently editing: /<%= @page.uri %></p>
 
<div id='page_<%= @page.id %>_container'></div>

<% content_for :caboose_js do %>
<script type="text/javascript">

$(document).ready(function() {
  var page = new Model({
    name: 'Page',
    id: <%= @page.id %>,
    attributes: [
      { name: 'parent_id'             , nice_name: 'Parent'                   , type: 'select'            , value: <%= raw Caboose.json(@page.parent_id, -1        ) %>, text: <%= raw (@page.parent_id == -1 ? "[No Parent]" : @page.parent.title).to_json %>, options_url: '/pages/sitemap-options' },  
      { name: 'menu_title'            , nice_name: 'Menu title'               , type: 'text'              , value: <%= raw Caboose.json(@page.menu_title           ) %> },     
      { name: 'slug'                  , nice_name: 'Slug'                     , type: 'text'              , value: <%= raw Caboose.json(@page.slug                 ) %> }, 
      { name: 'alias'                 , nice_name: 'Alias'                    , type: 'text'              , value: <%= raw Caboose.json(@page.alias                ) %> }, 
      { name: 'redirect_url'          , nice_name: 'Redirect URL'             , type: 'text'              , value: <%= raw Caboose.json(@page.redirect_url         ) %> }, 
      { name: 'hide'                  , nice_name: 'Hide'                     , type: 'checkbox'          , value: <%= raw @page.hide %> }, 
      { name: 'content_format'        , nice_name: 'Content format'           , type: 'select'            , value: <%= raw Caboose.json(@page.content_format       ) %> }, 
      { name: 'custom_css'            , nice_name: 'Custom CSS'               , type: 'textarea'          , value: <%= raw Caboose.json(@page.custom_css           ) %> }, 
      { name: 'custom_js'             , nice_name: 'Custom javascript'        , type: 'textarea'          , value: <%= raw Caboose.json(@page.custom_js            ) %> }, 
      { name: 'layout'                , nice_name: 'Layout'                   , type: 'text'              , value: <%= raw Caboose.json(@page.layout               ) %> }, 
      { name: 'custom_sort_children'  , nice_name: 'Custom sort child pages'  , type: 'checkbox'          , value: <%= raw @page.custom_sort_children%> },      
      { name: 'seo_title'             , nice_name: 'SEO title'                , type: 'text'              , value: <%= raw Caboose.json(@page.seo_title            ) %> },
      { name: 'meta_description'      , nice_name: 'Meta description'         , type: 'text'              , value: <%= raw Caboose.json(@page.meta_description     ) %> },
      { name: 'meta_robots'           , nice_name: 'Meta robots'              , type: 'checkbox-multiple' , value: <%= raw (@page.meta_robots.nil? ? [] : @page.meta_robots.split(', ')).to_json %>, text: <%= raw (@page.meta_robots.nil? ? "[Empty]" : @page.meta_robots).to_json %>, options_url: '/pages/robots-options' },
      { name: 'canonical_url'         , nice_name: 'Canonical URL'            , type: 'text'              , value: <%= raw Caboose.json(@page.canonical_url        ) %> },
      { name: 'fb_description'        , nice_name: 'Facebook description'     , type: 'text'              , value: <%= raw Caboose.json(@page.fb_description       ) %> },
      { name: 'gp_description'        , nice_name: 'Google+ description'      , type: 'text'              , value: <%= raw Caboose.json(@page.gp_description       ) %> }
    ]
  });
});

</script>
<%= tinymce :caboose %>
<% end %>
